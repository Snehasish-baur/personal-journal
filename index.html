<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Privacy-First Personal Journal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    }
  </script>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-200">
  <div id="app" class="min-h-screen flex items-center justify-center p-2 sm:p-4">
    <div class="w-full max-w-4xl bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg rounded-2xl shadow-lg p-6">


      <!-- LOGIN / UNLOCK -->
      <div id="loginView" class="animate-fade-in">
        <h1 class="text-2xl font-semibold">Privacy-First Personal Journal</h1>
        <p class="mt-2 text-sm text-slate-600">Your entries are encrypted locally. Pick a password and remember it â€” there is no recovery.</p>


        <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300">Password</label>
            <input id="password" type="password" placeholder="Choose a password" class="mt-1 block w-full rounded-md border py-2 px-3 dark:bg-slate-700 dark:border-slate-600 dark:text-white" />
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300">Confirm (for new users)</label>
            <input id="confirmPassword" type="password" placeholder="Confirm (optional)" class="mt-1 block w-full rounded-md border py-2 px-3 dark:bg-slate-700 dark:border-slate-600 dark:text-white" />
          </div>
        </div>


        <div class="mt-4 flex gap-2">
          <button id="unlockBtn" class="btn-primary px-4 py-2 text-white rounded-md flex items-center justify-center gap-2 w-40">
            <span id="unlockBtnText">Unlock / Create</span>
            <div id="unlockSpinner" class="spinner hidden"></div>
          </button>
          <button id="openDemoBtn" class="px-4 py-2 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">Open Demo Data</button>
          <button id="clearAllBtn" class="ml-auto px-3 py-2 text-sm text-red-600">Erase All Local Data</button>
        </div>


        <div id="loginMsg" class="mt-3 text-sm text-rose-600"></div>
      </div>


      <!-- APP -->
      <div id="appView" class="hidden">
        <div class="flex items-start gap-4">
          <div class="flex-1">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-xl font-semibold">My Journal</h2>
                <p class="text-sm text-slate-600 dark:text-slate-400">Encrypted locally with your password. Plaintext is only in memory while unlocked.</p>
              </div>


              <div class="flex gap-2 items-center">
                <input id="search" class="mono border rounded-md px-2 py-1 text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white" placeholder="Search entries" />
                <button id="newEntryBtn" class="btn-secondary px-3 py-1 text-white rounded-md">New</button>
                <button id="exportBtn" class="px-3 py-1 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">Export</button>
                <label class="px-3 py-1 border rounded-md cursor-pointer dark:border-slate-600 dark:hover:bg-slate-700"><input id="importFile" type="file" accept="application/json" class="hidden" /> Import</label>
                <button id="logoutBtn" class="px-3 py-1 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">Lock</button>
                <button id="themeToggleBtn" title="Toggle Theme" class="p-2 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">
                  <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707z"/>
                  </svg>
                  <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="hidden" viewBox="0 0 16 16">
                    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162h1.212a.217.217 0 0 1 .134.386l-.979.715.387 1.162a.217.217 0 0 1-.316.242l-.979-.715-.979.715a.217.217 0 0 1-.316-.242l.387-1.162-.979-.715a.217.217 0 0 1 .134-.386h1.212l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774.258c.346-.115.617-.386.732-.732L13.863.1z"/>
                  </svg>
                </button>
                <button id="colorThemeBtn" title="Change Color Theme" class="p-2 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-palette-fill" viewBox="0 0 16 16">
                    <path d="M12.433 10.07C14.133 10.585 16 11.15 16 8a8 8 0 1 0-15.93 1.21.5.5 0 0 0 .948-.324c.062-.242.142-.484.256-.716.114-.232.25-.457.4-.67.15-.213.312-.414.488-.608.176-.195.366-.38.57-.558.204-.178.42-.345.648-.5.228-.155.467-.298.712-.43.245-.133.5-.256.76-.37.26-.115.528-.22.802-.316.274-.097.557-.185.848-.265.292-.08.59-.152.895-.214.305-.06.615-.11.93-.15.315-.04.633-.07.953-.09.32-.02.643-.03.968-.03a1 1 0 0 0 0-2c-.325 0-.648.01-.968.03-.32.02-.638.05-.953.09-.315.04-.625.09-.93.15-.305.06-.6.134-.895.214-.29.08-.58.168-.848.265-.274.096-.542.201-.802.316-.26.114-.515.237-.76.37-.245.132-.484.275-.712.43-.228.155-.444.322-.648.5-.204.178-.394.363-.57.558-.176.195-.338.396-.488.608-.15.213-.286.438-.4.67-.114.232-.194.474-.256.716a.5.5 0 1 0 .948.324c.04-.16.09-.312.15-.457.062-.145.132-.28.21-.408.078-.127.16-.24.25-.348.09-.108.187-.205.29-.29.103-.085.21-.16.32-.225.11-.064.227-.12.34-.164.115-.045.23-.08.35-.108.12-.028.24-.045.36-.053.12-.008.243-.01.368-.01s.248.002.368.01c.12.008.24.025.36.053.12.028.235.063.35.108.113.044.23.1.34.164.11.065.217.14.32.225.103.085.2.182.29.29.09.108.172.22.25.348.078.128.148.263.21.408.06.145.11.297.15.457z"/>
                  </svg>
                </button>
              </div>
            </div>


            <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="md:col-span-1">
                <div id="entriesList" class="space-y-3 max-h-[60vh] overflow-y-auto pr-2"></div>
              </div>


              <div class="md:col-span-2">
                <div class="bg-slate-50 rounded-lg p-4 dark:bg-slate-900/50">
                  <input id="entryTitle" placeholder="Title" class="w-full text-lg font-medium bg-transparent outline-none" />
                  <textarea id="entryBody" rows="12" placeholder="Write something..." class="w-full mt-2 bg-transparent outline-none resize-none"></textarea>


                  <div class="mt-3 flex gap-2">
                    <button id="saveBtn" class="btn-primary px-4 py-2 text-white rounded-md">Save</button>
                    <button id="deleteBtn" class="px-4 py-2 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">Delete</button>
                    <button id="previewBtn" class="px-4 py-2 border rounded-md dark:border-slate-600 dark:hover:bg-slate-700">Preview</button>
                    <div id="savedMsg" class="ml-auto text-sm text-slate-600 dark:text-slate-400"></div>
                  </div>


                  <div id="previewArea" class="mt-4 hidden bg-white p-3 border rounded dark:bg-slate-700 dark:border-slate-600"></div>
                </div>
              </div>
            </div>


          </div>
        </div>


      </div>


    </div>
  </div>


<script src="script.js" defer></script>
</body>
</html>



